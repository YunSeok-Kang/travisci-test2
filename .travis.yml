language: objective-c
osx_image: xcode9.2
rvm:
- 2.2
env:
- TRAVIS_TAG="travis_test" PROJECT_NAME="testpackage" UNITY_PROJECT_PATH="UnityExample"
  DEPLOY_UNITYPACKAGE="path set in deploy script"
cache:
  directories:
  - "$UNITY_DOWNLOAD_CACHE"
before_install:
- chmod a+x ./travis-build/*.sh
install:
- cat /etc/hosts
- "./travis-build/install-unity.sh"
script:
- "./travis-build/build.sh"
- "./travis-build/run-tests.sh"
after_success:
- "./travis-build/export-unity-package.sh"
before_deploy:
- DEPLOY_UNITYPACKAGE="$(ls -a release/*.zip | head -n 1)"
deploy:
  provider: releases
  api_key:
    secure: qzSalLHJh2cDYqPQRxck5xbZqIg+HLf3iVFgF0LULt6UAt39xW1lbGoGcKTemNrxpE5wU4u0D7HN0tLFfy2qqmlHJHcjsJnQwe6m0dak0ON/vY23/JSwczCDG57hd/0tMGRhX1wNKtpq+ahA0oEcDHUgllpZwStymrHqFxCc50eS2ZpD3MB4f//GmbJIS6hswyybr/Eh9PUNra4eSpnmMVaEh0TUc5e+Y1waJqa2Ftwsi2DPzMMON1haikw+n+WzQhhC8B9hTML2CAyQnUFjjrgJ2u/JL0J5hPuqTNDWESHT1iajbUjfbH5UO+Bp10o+xYaF6BrJcaxWnW8zr7XjojntVqz+55sz8YfrsAnaDrgDDurGK5C2j4lvKuQ//6vC3E1h+HARKz89QHrM6pMVL4ZGRYemI7C3wfPuGd6BDeKSCin2RsnHGbSzvTTlJkF8Kw4wtG47nfSaj3zTO7z2pi2v2ImiqJR7Iyg7CbdtC9lQYP88rxwmC4Kw0nYBji9yIZTNdbcjV7Fx3NMA98yEPzXh930meBzUMqzRemWlr7PDH7SuRGTZ7zb/RHRVGV/oKGzzTfC4uvE7O70lgHre3bdhIkxAy2Sm103khFoDL04gmQHusb2XHH+cC453pkbXT6sOaf5g/a+y4feqIUvj/XYrY/87HzxkOMkDVx7OEok=
  file: $DEPLOY_UNITYPACKAGE
  skip_cleanup: true
  overwrite: true
  on:
    tags: true 